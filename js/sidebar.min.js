!

function(t,e){e.fn.themePin=function(t){var i=0,o=0,s=[],n=!1,r=e(window),a=[],h=[];t=t||{};var l=function(){for(var i=0,o=s.length;i<o;i++){var a=s[i];if(t.minWidth&&r.width()<=t.minWidth)a.parent().is(".pin-wrapper")&&a.unwrap(),a.css({width:"",left:"",top:"",position:""}),t.activeClass&&a.removeClass(t.activeClass),a.removeClass("sticky-transition"),a.removeClass("sticky-absolute"),n=!0;else{n=!1;var h=t.containerSelector?a.closest(t.containerSelector).length?a.closest(t.containerSelector):e(t.containerSelector):e(document.body),l=a.offset(),p=h.offset();if(void 0!==p){var c=a.parent().offset();a.parent().is(".pin-wrapper")||a.wrap("<div class='pin-wrapper'>");var d=e.extend({top:0,bottom:0},t.padding||{}),u=parseInt(a.parent().parent().css("padding-top")),m=parseInt(a.parent().parent().css("padding-bottom"));t.autoInit&&(e("").hasClass("")?(d.top=0,e(".fixed-pos").length&&(d.top+=e(".page-top.fixed-pos").height())):d.top=0,void 0!==t.paddingOffsetTop?d.top+=parseInt(t.paddingOffsetTop,10):d.top+=0,void 0!==t.paddingOffsetBottom?d.bottom=parseInt(t.paddingOffsetBottom,10):d.bottom=0);var f=a.css("border-bottom"),g=a.outerHeight();a.css("border-bottom","1px solid transparent");var w=a.outerHeight()-g-1;a.css("border-bottom",f),a.css({width:a.outerWidth()<=a.parent().width()?a.outerWidth():a.parent().width()}),a.parent().css("height",a.outerHeight()+w),!t.autoFit&&!t.fitToBottom||a.outerHeight()<=r.height()?a.data("themePin",{pad:d,from:(t.containerSelector?p.top:l.top)-d.top+u,pb:m,parentTop:c.top-u,offset:w}):a.data("themePin",{pad:d,fromFitTop:(t.containerSelector?p.top:l.top)-d.top+u,from:(t.containerSelector?p.top:l.top)+a.outerHeight()-e(window).height()+u,pb:m,parentTop:c.top-u,offset:w})}}}},p=function(){if(!n){i=r.scrollTop();for(var l=window.innerHeight||r.height(),p=0,c=s.length;p<c;p++){var d,u=e(s[p]),m=u.data("themePin"),f=m.to;if(m){var g=t.containerSelector?u.closest(t.containerSelector).length?u.closest(t.containerSelector):e(t.containerSelector):e(document.body),w=u.outerHeight()+m.pad.top<=l;if(m.end=g.offset().top+g.height(),w?m.to=g.offset().top+g.height()-u.outerHeight()-m.pad.bottom-m.pb:(m.to=g.offset().top+g.height()-l-m.pb,m.to2=g.height()-u.outerHeight()-m.pad.bottom-m.pb),w){var v=m.from-m.pad.bottom,y=m.to-m.pad.top-m.offset;if(void 0!==m.fromFitTop&&m.fromFitTop&&(v=m.fromFitTop-m.pad.bottom),v+u.outerHeight()>m.end||v>=y){u.css({position:"",top:"",left:""}),t.activeClass&&u.removeClass(t.activeClass),u.removeClass("sticky-transition"),u.removeClass("sticky-absolute");continue}i>v&&i<y?(!("fixed"==u.css("position"))&&u.css({left:u.offset().left,top:m.pad.top}).css("position","fixed"),t.activeClass&&u.addClass(t.activeClass),u.removeClass("sticky-transition"),u.removeClass("sticky-absolute")):i>=y?(u.css({left:"",top:y-m.parentTop+m.pad.top}).css("position","absolute"),t.activeClass&&u.addClass(t.activeClass),u.hasClass("sticky-absolute")&&u.addClass("sticky-transition"),u.addClass("sticky-absolute")):(u.css({position:"",top:"",left:""}),t.activeClass&&u.removeClass(t.activeClass),u.removeClass("sticky-transition"),u.removeClass("sticky-absolute"))}else if(f!=m.to&&(a[p]=h[p]=!1),u.height()+m.pad.top+m.pad.bottom>l||a[p]||h[p]){var z=parseInt(u.parent().parent().css("padding-top"));i+m.pad.top-z<=m.parentTop?(u.css({position:"",top:"",bottom:"",left:""}),a[p]=h[p]=!1):i>=m.to?(u.css({left:"",top:m.to2,bottom:""}).css("position","absolute"),t.activeClass&&u.addClass(t.activeClass),u.hasClass("sticky-absolute")&&u.addClass("sticky-transition"),u.addClass("sticky-absolute")):i>=o?a[p]?(a[p]=!1,d=u.offset().top-m.parentTop,u.css({left:"",top:d,bottom:""}).css("position","absolute"),t.activeClass&&u.addClass(t.activeClass),u.hasClass("sticky-absolute")&&u.addClass("sticky-transition"),u.addClass("sticky-absolute")):!h[p]&&u.height()+u.offset().top+m.pad.bottom<i+l&&(h[p]=!0,!("fixed"==u.css("position"))&&u.css({left:u.offset().left,bottom:m.pad.bottom,top:""}).css("position","fixed"),t.activeClass&&u.addClass(t.activeClass),u.removeClass("sticky-transition"),u.removeClass("sticky-absolute")):i<o&&(h[p]?(h[p]=!1,d=u.offset().top-m.parentTop,u.css({left:"",top:d,bottom:""}).css("position","absolute"),t.activeClass&&u.addClass(t.activeClass),u.hasClass("sticky-absolute")&&u.addClass("sticky-transition"),u.addClass("sticky-absolute")):!a[p]&&u.offset().top>=i+m.pad.top&&(a[p]=!0,!("fixed"==u.css("position"))&&u.css({left:u.offset().left,top:m.pad.top,bottom:""}).css("position","fixed"),t.activeClass&&u.addClass(t.activeClass),u.removeClass("sticky-transition"),u.removeClass("sticky-absolute")))}else i>=m.parentTop-m.pad.top?u.css({position:"fixed",top:m.pad.top}):u.css({position:"",top:"",bottom:"",left:""}),a[p]=h[p]=!1}}o=i}},c=function(){l(),p()};return this.each(function(){var t=e(this),i=e(this).data("themePin")||{};i&&i.update||(s.push(t),e("img",this).one("load",l),i.update=c,e(this).data("themePin",i),a.push(!1),h.push(!1))}),e(window).on("smartresize",function(){l(),p()}),e(window).on("touchmove scroll",p),l(),e(this).bind("recalc.pin",function(){l(),p()}),this},t=t||{};var i=function(t,e){return this.initialize(t,e)};i.defaults={autoInit:!1,minWidth:767,activeClass:"sticky-active",padding:{top:0,bottom:0},offsetTop:0,offsetBottom:0,autoFit:!1,fitToBottom:!1},i.prototype={initialize:function(t,e){return t.data("__sticky")?this:(this.$el=t,this.setData().setOptions(e).build(),this)},setData:function(){return this.$el.data("__sticky",this),this},setOptions:function(t){return this.options=e.extend(!0,{},i.defaults,t,{wrapper:this.$el}),this},build:function(){if(!e.isFunction(e.fn.themePin))return this;var t=this.options.wrapper;return t.themePin(this.options),e(window).on("resize",function(){setTimeout(function(){t.trigger("recalc.pin")},800);var e=t.parent();t.outerWidth(e.width()),"fixed"==t.css("position")&&t.css("left",e.offset().left)}),this}},e.extend(t,{Sticky:i}),e.fn.themeSticky=function(i){return this.map(function(){var o=e(this);return o.data("__sticky")?(o.trigger("recalc.pin"),setTimeout(function(){o.trigger("recalc.pin")},800),o.data("__sticky")):new t.Sticky(o,i)})}}.apply(this,[window.theme,jQuery]);